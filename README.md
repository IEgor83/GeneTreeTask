# Проект Genealogy Tree

Это проект на основе Django для создания и управления генеалогическим деревом. Проект контейнеризован с использованием Docker для упрощённой настройки и развёртывания.

## Функциональные возможности

- Добавление и удаление родственников.
- Настройка связей между людьми (кто чей родитель или ребенок).
- Отображение генеалогического древа в виде сетки, содержащими ФИО и родственные связи.
- Редактирование, добавление и удаление информации о родственниках в сетке.

**ВАЖНО! Генеалогическое дерево отображает отдельно детей человека с последующими поколениями и отдельно его предков**

**Генеалогическое дерево не отображает дальних родственников для конкретного человека (двоюродные или троюродные братья/сестры), так как сложно поддерживать вывод структуры такого дерева**

**Также предусмотрен вывод информации о семье конкретного человека по его id:**

  - Количество человек в семье.
  - Количество поколений в семье.
  - Количество родственников мужского пола.
  - Количество родственников женского пола.

**Эти запросы выполнены в файле queries.py**

P.S. Не получилось написать SQL запросы из-за сложной логики поиска связей, поэтому они написаны на языке python

## Технологии

- Django
- Python
- SQLite

## Модели данных

#### Person (Человек)
#### Relationship (Отношения)

## Требования

Перед началом убедитесь, что на вашем компьютере установлены следующие программы:

- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

---

## Инструкции по настройке

1. Склонируйте репозиторий:

   ```bash
   git clone https://github.com/IEgor83/GeneTreeTask.git
   cd GeneTreeTask
   ```

2. Соберите и запустите Docker-контейнеры:

   ```bash
   docker-compose up --build
   ```

3. После запуска контейнеров приложение будет доступно по адресу:

   ```bash
   http://localhost:8000
   ```

---

## Запуск локально
### 1. Создание и активация виртуального окружения

Создайте виртуальное окружение и активируйте его:

```bash
python -m venv venv
```

На Windows:

```bash
venv\Scripts\activate
```

На macOS/Linux:

```bash
source venv/bin/activate
```
### 2. Установка Poetry

```bash
pip install poetry
```

### 3. Установка зависимостей

Для установки всех зависимостей используйте Poetry:

```bash
poetry install
```

### 4. Применение миграций

После установки зависимостей примените миграции для базы данных:

```bash
python manage.py migrate
```

### 5. Запуск сервера разработки

Теперь вы можете запустить сервер разработки Django:

```bash
python manage.py runserver
```

Перейдите в браузер и откройте адрес [http://127.0.0.1:8000/](http://127.0.0.1:8000/), чтобы убедиться, что приложение работает.

## Дополнительная информация

Если у вас возникают проблемы с установкой или запуском, убедитесь, что у вас установлены все необходимые инструменты, такие как Python и Poetry.

## Структура проекта

- **/GeneTreeTask**: Содержит файлы Django-проекта.
- **/relatives**: Содержит файлы приложения, включая модели, обработчики, urls.
- **manage.py**: Скрипт управления Django.
- **pyproject.toml**: Содержит зависимости.
- **queries.py**: Содержит запросы к бд.
- **Dockerfile**: Определяет настройки окружения для контейнера Django.
- **docker-compose.yml**: Определяет сервисы и конфигурации для Docker Compose.

---

## Основные команды

- **Сборка и запуск контейнеров:**

  ```bash
  docker-compose up --build
  ```

- **Остановка контейнеров:**

  ```bash
  docker-compose down
  ```

- **Выполнение миграций базы данных:**

  ```bash
  docker exec -it django_app python manage.py migrate
  ```

- **Доступ к оболочке Django:**

  ```bash
  docker exec -it django_app python manage.py shell
  ```

---

